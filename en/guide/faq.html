<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>FAQ | TopUnicorn</title>
    <meta name="description" content="为企业云而生">
    <link rel="icon" href="/sites/favicon.ico">
    
    <link rel="preload" href="/sites/assets/css/0.styles.b5acc818.css" as="style"><link rel="preload" href="/sites/assets/js/app.481a8143.js" as="script"><link rel="preload" href="/sites/assets/js/2.1328de9b.js" as="script"><link rel="preload" href="/sites/assets/js/28.f9a7efaf.js" as="script"><link rel="prefetch" href="/sites/assets/js/10.8e067f10.js"><link rel="prefetch" href="/sites/assets/js/11.a60a68bf.js"><link rel="prefetch" href="/sites/assets/js/12.23685d4f.js"><link rel="prefetch" href="/sites/assets/js/13.92dbaef6.js"><link rel="prefetch" href="/sites/assets/js/14.1d800576.js"><link rel="prefetch" href="/sites/assets/js/15.8d76eaf1.js"><link rel="prefetch" href="/sites/assets/js/16.901c92ee.js"><link rel="prefetch" href="/sites/assets/js/17.95c1ce64.js"><link rel="prefetch" href="/sites/assets/js/18.ad31dfb0.js"><link rel="prefetch" href="/sites/assets/js/19.3913d806.js"><link rel="prefetch" href="/sites/assets/js/20.b2dc85d6.js"><link rel="prefetch" href="/sites/assets/js/21.14e64189.js"><link rel="prefetch" href="/sites/assets/js/22.a1438998.js"><link rel="prefetch" href="/sites/assets/js/23.d239bce7.js"><link rel="prefetch" href="/sites/assets/js/24.fde94c27.js"><link rel="prefetch" href="/sites/assets/js/25.6ed484f9.js"><link rel="prefetch" href="/sites/assets/js/26.c10f1892.js"><link rel="prefetch" href="/sites/assets/js/27.9c1d644c.js"><link rel="prefetch" href="/sites/assets/js/29.cb3244b1.js"><link rel="prefetch" href="/sites/assets/js/3.28419bae.js"><link rel="prefetch" href="/sites/assets/js/30.01e81c54.js"><link rel="prefetch" href="/sites/assets/js/31.497f5224.js"><link rel="prefetch" href="/sites/assets/js/32.4f5a21f1.js"><link rel="prefetch" href="/sites/assets/js/33.4214f7bd.js"><link rel="prefetch" href="/sites/assets/js/34.6e75de5f.js"><link rel="prefetch" href="/sites/assets/js/35.d833ef2f.js"><link rel="prefetch" href="/sites/assets/js/36.f4857f4f.js"><link rel="prefetch" href="/sites/assets/js/37.b43ef3f0.js"><link rel="prefetch" href="/sites/assets/js/38.20f4141a.js"><link rel="prefetch" href="/sites/assets/js/39.d3ddfbdb.js"><link rel="prefetch" href="/sites/assets/js/4.5b3e85ea.js"><link rel="prefetch" href="/sites/assets/js/40.a5e7dade.js"><link rel="prefetch" href="/sites/assets/js/41.691b1c1e.js"><link rel="prefetch" href="/sites/assets/js/42.2272ee55.js"><link rel="prefetch" href="/sites/assets/js/43.44179df7.js"><link rel="prefetch" href="/sites/assets/js/44.b039940d.js"><link rel="prefetch" href="/sites/assets/js/45.591aa47f.js"><link rel="prefetch" href="/sites/assets/js/46.e598661a.js"><link rel="prefetch" href="/sites/assets/js/47.f18ae697.js"><link rel="prefetch" href="/sites/assets/js/48.846f1978.js"><link rel="prefetch" href="/sites/assets/js/49.f8fdbd22.js"><link rel="prefetch" href="/sites/assets/js/5.ce2090cc.js"><link rel="prefetch" href="/sites/assets/js/50.b83dc72c.js"><link rel="prefetch" href="/sites/assets/js/51.a283132e.js"><link rel="prefetch" href="/sites/assets/js/52.043b5611.js"><link rel="prefetch" href="/sites/assets/js/53.bf363579.js"><link rel="prefetch" href="/sites/assets/js/54.ab69e0e5.js"><link rel="prefetch" href="/sites/assets/js/55.1331854c.js"><link rel="prefetch" href="/sites/assets/js/56.0315c64a.js"><link rel="prefetch" href="/sites/assets/js/57.0057d56c.js"><link rel="prefetch" href="/sites/assets/js/58.5e6a3df1.js"><link rel="prefetch" href="/sites/assets/js/59.62f33205.js"><link rel="prefetch" href="/sites/assets/js/6.939b8685.js"><link rel="prefetch" href="/sites/assets/js/60.1d9c11c9.js"><link rel="prefetch" href="/sites/assets/js/61.e1e8ed74.js"><link rel="prefetch" href="/sites/assets/js/62.ef8b5761.js"><link rel="prefetch" href="/sites/assets/js/63.989fb0c0.js"><link rel="prefetch" href="/sites/assets/js/64.70f3dcda.js"><link rel="prefetch" href="/sites/assets/js/65.074ee239.js"><link rel="prefetch" href="/sites/assets/js/66.e9854488.js"><link rel="prefetch" href="/sites/assets/js/67.cc88db87.js"><link rel="prefetch" href="/sites/assets/js/68.0fcefa17.js"><link rel="prefetch" href="/sites/assets/js/69.360c9c32.js"><link rel="prefetch" href="/sites/assets/js/7.866de064.js"><link rel="prefetch" href="/sites/assets/js/70.51490900.js"><link rel="prefetch" href="/sites/assets/js/71.a04b0753.js"><link rel="prefetch" href="/sites/assets/js/72.c75e1d55.js"><link rel="prefetch" href="/sites/assets/js/8.aeae1da0.js"><link rel="prefetch" href="/sites/assets/js/9.c11fe44f.js">
    <link rel="stylesheet" href="/sites/assets/css/0.styles.b5acc818.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/sites/" class="home-link router-link-active"><!----> <span class="site-name">TopUnicorn</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/sites/guide/" class="nav-link">文档指南</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">赋能</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/sites/en/guide/.html" class="nav-link">统一门户平台</a></li><li class="dropdown-item"><!----> <a href="/sites/en/guide/.html" class="nav-link">注册中心</a></li><li class="dropdown-item"><!----> <a href="/sites/en/guide/.html" class="nav-link">配置中心</a></li><li class="dropdown-item"><!----> <a href="/sites/en/guide/.html" class="nav-link">鉴权中心</a></li><li class="dropdown-item"><!----> <a href="/sites/en/guide/.html" class="nav-link">分布式消息队列中心</a></li><li class="dropdown-item"><!----> <a href="/sites/en/guide/.html" class="nav-link">分布式调度中心</a></li><li class="dropdown-item"><!----> <a href="/sites/en/guide/.html" class="nav-link">分布式计算中心</a></li><li class="dropdown-item"><!----> <a href="/sites/en/guide/.html" class="nav-link">数据存储中心</a></li><li class="dropdown-item"><!----> <a href="/sites/en/guide/.html" class="nav-link">监控中心</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/sites/guide/" class="nav-link">文档指南</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">赋能</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/sites/en/guide/.html" class="nav-link">统一门户平台</a></li><li class="dropdown-item"><!----> <a href="/sites/en/guide/.html" class="nav-link">注册中心</a></li><li class="dropdown-item"><!----> <a href="/sites/en/guide/.html" class="nav-link">配置中心</a></li><li class="dropdown-item"><!----> <a href="/sites/en/guide/.html" class="nav-link">鉴权中心</a></li><li class="dropdown-item"><!----> <a href="/sites/en/guide/.html" class="nav-link">分布式消息队列中心</a></li><li class="dropdown-item"><!----> <a href="/sites/en/guide/.html" class="nav-link">分布式调度中心</a></li><li class="dropdown-item"><!----> <a href="/sites/en/guide/.html" class="nav-link">分布式计算中心</a></li><li class="dropdown-item"><!----> <a href="/sites/en/guide/.html" class="nav-link">数据存储中心</a></li><li class="dropdown-item"><!----> <a href="/sites/en/guide/.html" class="nav-link">监控中心</a></li></ul></div></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="faq"><a href="#faq" aria-hidden="true" class="header-anchor">#</a> FAQ</h1> <p></p><div class="table-of-contents"><ul><li><a href="#exclude-non-column-properties">Exclude non-column properties</a></li><li><a href="#runtime-exception-invalid-bound-statement-not-found">Runtime Exception Invalid bound statement (not found)</a></li><li><a href="#customized-sql-cannot-be-executed">Customized SQL cannot be executed</a></li><li><a href="#exception-for-startup">Exception For Startup</a></li><li><a href="#cannot-autofill-primary-key-with-long-type">Cannot autofill primary key with Long type</a></li><li><a href="#javascript-precision-problem-for-id-worker">Javascript precision problem for ID_WORKER</a></li><li><a href="#set-null-or-empty-string-value-for-insert-update">Set null or empty string value for Insert / Update</a></li><li><a href="#result-type-is-boolean-for-column-with-type-bit-tinyint-1">Result Type is boolean for Column with type bit, tinyint(1)</a></li><li><a href="#two-limit-statement-in-running-sql">Two limit statement in running SQL</a></li><li><a href="#return-primary-key-after-insert">Return Primary Key after Insert</a></li><li><a href="#specify-select-columns-in-mp">Specify select columns in MP</a></li><li><a href="#second-level-cache-on-mapper">Second Level Cache on Mapper</a></li><li><a href="#refresh-second-level-cache-on-mapper">Refresh Second Level Cache on Mapper</a></li><li><a href="#cause-org-apache-ibatis-type-typeexception-error-setting-null-for-parameter-1-with-jdbctype-other">Cause: org.apache.ibatis.type.TypeException:Error setting null for parameter #1 with JdbcType OTHER</a></li><li><a href="#cannot-get-params-from-page-object-in-customized-sql-2-x-only">Cannot get params from Page object in customized SQL(2.x Only)</a></li><li><a href="#auto-underscore-to-camel-case-for-return-type-map">Auto Underscore To Camel Case for return type Map</a></li><li><a href="#use-limit-in-wrapper">Use limit in wrapper</a></li><li><a href="#why-only-service-has-insertbatch">Why only Service has insertBatch()</a></li><li><a href="#autofill-not-work-for-logic-deletion">Autofill not work for Logic Deletion</a></li><li><a href="#deal-the-key-word-of-database-in-3-x">Deal the KEY WORD of database in 3.x</a></li><li><a href="#mybatisplusexception-your-property-named-xxx-cannot-find-the-corresponding-database-column-name">MybatisPlusException: Your property named &quot;xxx&quot; cannot find the corresponding database column name!</a></li></ul></div><p></p> <h2 id="exclude-non-column-properties"><a href="#exclude-non-column-properties" aria-hidden="true" class="header-anchor">#</a> Exclude non-column properties</h2> <p>Three ways:</p> <ul><li><p>Use <code>transient</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">transient</span> String noColumn<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>Use <code>static</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> String noColumn<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>Use <code>TableField</code> Annotation</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>exist<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> String noColumn<span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="runtime-exception-invalid-bound-statement-not-found"><a href="#runtime-exception-invalid-bound-statement-not-found" aria-hidden="true" class="header-anchor">#</a> Runtime Exception <code>Invalid bound statement (not found)</code></h2> <blockquote><p>No doubt, it's caused by incorrect configuration/environment</p></blockquote> <ul><li><p>Check whether the jar confliction</p></li> <li><p>Check your scan path for Mapper.java, 2 ways:</p> <ul><li>1:Add  <code>MapperScan</code> on your <code>Configuration</code> class</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@MapperScan</span><span class="token punctuation">(</span><span class="token string">&quot;com.yourpackage.*.mapper&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">YourConfigClass</span><span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>2:Configurate <code>MapperScannerConfigurer</code> in your <code>Configuration</code> class <a href="https://gitee.com/baomidou/mybatisplus-spring-boot/blob/config%E6%96%B9%E5%BC%8F/src/main/java/com/baomidou/springboot/config/MybatisPlusConfig.java" target="_blank" rel="noopener noreferrer">Sample<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> MapperScannerConfigurer <span class="token function">mapperScannerConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    MapperScannerConfigurer scannerConfigurer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MapperScannerConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//you can also get the basePackage via environment configuration</span>
    scannerConfigurer<span class="token punctuation">.</span><span class="token function">setBasePackage</span><span class="token punctuation">(</span><span class="token string">&quot;com.yourpackage.*.mapper&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> scannerConfigurer<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>Check whether @TableId(Primary Key) is specified. If not,  methods for ById(such as <code>selectById</code>) will encounter this error. If one of the property named &quot;id&quot;, @TableId is optional(MP treat &quot;id&quot; as Primary Key)</p></li> <li><p>Check whether MybatisSqlSessionFactory is used, instead of SqlSessionFactory</p></li> <li><p>Check whether customized SqlInjector is defined, and  <code>getMethodList()</code> is overrided, and your basic methods is added(see <a href="https://gitee.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-core/src/main/java/com/baomidou/mybatisplus/core/injector/DefaultSqlInjector.java" target="_blank" rel="noopener noreferrer">DefaultSqlInjector<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, for customized basic methods, see <a href="https://gitee.com/baomidou/mybatis-plus-samples/tree/master/mybatis-plus-sample-deluxe" target="_blank" rel="noopener noreferrer">sample<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</p></li></ul> <h2 id="customized-sql-cannot-be-executed"><a href="#customized-sql-cannot-be-executed" aria-hidden="true" class="header-anchor">#</a> Customized SQL cannot be executed</h2> <ul><li><p>Problem Description:customized SQL defined in mapper.xml files, but cannot be executed.</p></li> <li><p>Solution: configurate your xml file path, the same as Mybatis native.</p></li> <li><p>Spring MVC Configuration(XML): <a href="https://gitee.com/baomidou/mybatis-plus-samples/blob/master/mybatis-plus-sample-quickstart-springmvc/src/main/resources/spring.xml" target="_blank" rel="noopener noreferrer">mybatisplus-spring-mvc-sample<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>sqlSessionFactory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.baomidou.mybatisplus.spring.MybatisSqlSessionFactoryBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>typeAliasesPackage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>xxx.entity<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>mapperLocations<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>classpath*:/mybatis/*/*.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>Spring Boot Configuration(yml): <a href="https://gitee.com/baomidou/mybatisplus-spring-boot/blob/2.x/src/main/resources/application.yml" target="_blank" rel="noopener noreferrer">mybatisplus-spring-boot-sample<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">mybatis-plus</span><span class="token punctuation">:</span>
  <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span> classpath*<span class="token punctuation">:</span>/mapper/**/*.xml
</code></pre></div><ul><li><p>Using <a href="https://www.jetbrains.com/" target="_blank" rel="noopener noreferrer">IDEA<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: XML files under src/main/java folder will not be compiled to target folder, you can solve it by:</p> <ul><li>Put your xml files under resources folder</li> <li>Or configure pom(for maven project) like below:</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- xml files under /java folder--&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>src/main/java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- xml files under /resources folder(this configuration is optional)--&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>src/main/resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <div class="tip custom-block"><p>Notice！For Maven multiple modules, scan path should start with <code>classpath*:</code> (load xml files from multiple jars)</p></div> <h2 id="exception-for-startup"><a href="#exception-for-startup" aria-hidden="true" class="header-anchor">#</a> Exception For Startup</h2> <ul><li><p>One:</p> <div class="language- extra-class"><pre class="language-text"><code>java.lang.ClassCastException: sun.reflect.generics.reflectiveObjects.TypeVariableImpl cannot be cast to java.lang.Class
</code></pre></div><p>MapperScan should exclude com.baomidou.mybatisplus.mapper.BaseMapper and subclass(such as customized basic mapper), e.g.:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span>BaseMapper<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SuperMapper</span><span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">BaseMapper</span><span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token comment">// your methods</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>Two:</p> <div class="language- extra-class"><pre class="language-text"><code>Injection of autowired
</code></pre></div><p>CAUSE:Spring 3 not support Generic Type Injection. Please upgrade to Spring 4+</p></li> <li><p>Three:</p> <div class="language- extra-class"><pre class="language-text"><code>java.lang.NoSuchMethodError: org.apache.ibatis.session.Configuration.getDefaultScriptingLanguageInstance() Lorg/apache/ibatis/scripting/LanguageDriver
</code></pre></div><p>Mybatis Version problem: this method is provided since v_3.4.2, upgrade mybatis version(Manage Mybatis version by MP is recommended)</p></li></ul> <h2 id="cannot-autofill-primary-key-with-long-type"><a href="#cannot-autofill-primary-key-with-long-type" aria-hidden="true" class="header-anchor">#</a> Cannot autofill primary key with Long type</h2> <p>Check whether <code>long</code> type is used instead of <code>Long</code></p> <div class="tip custom-block"><p>For <code>long</code> type, default value=0, MP only has <code>null</code> value check</p></div> <h2 id="javascript-precision-problem-for-id-worker"><a href="#javascript-precision-problem-for-id-worker" aria-hidden="true" class="header-anchor">#</a> Javascript precision problem for ID_WORKER</h2> <p>Length of ID_WORKER value is 18-19, which JavaScript cannot process correctly, manifest as last two digits always 0. Ideas: return String instead of Long(can use ID_WORKER_STR for String id)</p> <ul><li><p>FastJson Serialization</p> <div class="language-java extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configureMessageConverters</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span>HttpMessageConverter<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">&gt;&gt;</span> converters<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    FastJsonHttpMessageConverter fastJsonConverter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FastJsonHttpMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    FastJsonConfig fjc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FastJsonConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// configure the strategy</span>
    fjc<span class="token punctuation">.</span><span class="token function">setSerializerFeatures</span><span class="token punctuation">(</span>SerializerFeature<span class="token punctuation">.</span>BrowserCompatible<span class="token punctuation">)</span><span class="token punctuation">;</span>
    fastJsonConverter<span class="token punctuation">.</span><span class="token function">setFastJsonConfig</span><span class="token punctuation">(</span>fjc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    converters<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>fastJsonConverter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>JackJson Serialization</p> <ul><li><p>Way 1:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Use Annotation</span>
<span class="token annotation punctuation">@JsonSerialize</span><span class="token punctuation">(</span>using<span class="token operator">=</span>ToStringSerializer<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> id<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>Way 2:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Global configuration(for all Long type, will return String instead)</span>
<span class="token keyword">final</span> ObjectMapper objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SimpleModule simpleModule <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
simpleModule<span class="token punctuation">.</span><span class="token function">addSerializer</span><span class="token punctuation">(</span>Long<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> ToStringSerializer<span class="token punctuation">.</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
objectMapper<span class="token punctuation">.</span><span class="token function">registerModule</span><span class="token punctuation">(</span>simpleModule<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p>General way: Use ID_WORKER_STR type which is for String id, Or add method <code>public String getIdStr()</code> , frontend use <code>idStr</code></p></li></ul> <h2 id="set-null-or-empty-string-value-for-insert-update"><a href="#set-null-or-empty-string-value-for-insert-update" aria-hidden="true" class="header-anchor">#</a> Set <code>null</code> or empty string value for Insert / Update</h2> <ul><li><p>Use FieldStrategy:</p> <ul><li>IGNORED:All Null/Empty value will be used for CRUD</li> <li>NOT_NULL:Only Not Null value will be used for CRUD. It's used by default</li> <li>NOT_EMPTY:Not Empty value will be used for CRUD.</li></ul></li></ul> <p>If you want to update Empty String or null value, you need to adjust <code>FieldStrategy</code> :</p> <ul><li><p>Way 1:Adjust Global Field Strategy</p> <p>Configurate fieldStrategy in GlobalConfiguration</p></li> <li><p>Way 2:Adjust entity property Field Strategy</p> <p>You can specify the strategy for CURD(Refer to <a href="/sites/guide/annotation.html">@TableField</a>):</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>insertStrategy<span class="token operator">=</span>FieldStrategy<span class="token punctuation">.</span>NOT_EMPTY<span class="token punctuation">,</span> updateStrategy<span class="token operator">=</span>FieldStrategy<span class="token punctuation">.</span>IGNORED<span class="token punctuation">,</span> whereStrategy<span class="token operator">=</span>FieldStrategy<span class="token punctuation">.</span>NOT_EMPTY<span class="token punctuation">)</span>
</code></pre></div></li> <li><p>Way 3:Use <code>UpdateWrapper</code> (3.x)</p> <p>Sample:</p> <div class="language-java extra-class"><pre class="language-java"><code>mapper<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>
   <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;mp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   Wrappers<span class="token punctuation">.</span><span class="token generics function"><span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span></span><span class="token function">lambdaUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
           <span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>User<span class="token operator">:</span><span class="token operator">:</span>getEmail<span class="token punctuation">,</span> null<span class="token punctuation">)</span> <span class="token comment">//set email=null</span>
           <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>User<span class="token operator">:</span><span class="token operator">:</span>getId<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//or put the set value in Wrapper.set </span>
mapper<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>
    null<span class="token punctuation">,</span>
    Wrappers<span class="token punctuation">.</span><span class="token generics function"><span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span></span><span class="token function">lambdaUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
       <span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>User<span class="token operator">:</span><span class="token operator">:</span>getAge<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
       <span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>User<span class="token operator">:</span><span class="token operator">:</span>getName<span class="token punctuation">,</span> <span class="token string">&quot;mp&quot;</span><span class="token punctuation">)</span>
       <span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>User<span class="token operator">:</span><span class="token operator">:</span>getEmail<span class="token punctuation">,</span> null<span class="token punctuation">)</span> <span class="token comment">//set email=null</span>
       <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>User<span class="token operator">:</span><span class="token operator">:</span>getId<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div></li></ul> <h2 id="result-type-is-boolean-for-column-with-type-bit-tinyint-1"><a href="#result-type-is-boolean-for-column-with-type-bit-tinyint-1" aria-hidden="true" class="header-anchor">#</a> Result Type is <code>boolean</code> for Column with type <code>bit</code>, <code>tinyint(1)</code></h2> <p>Mysql driver will recognize tinyint(1) as boolean:  0=false, other=true</p> <p>MyBatis doesn't handle such case, if you won't want map tinyint(1) to boolean, you can do:</p> <ul><li>Modify column type from tinyint(1) to tinyint(2) or int</li> <li>or Modify the jdbc connection param, add <code>tinyInt1isBit=false</code>:</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code>jdbc:mysql://127.0.0.1:3306/mp?tinyInt1isBit=false
</code></pre></div><h2 id="two-limit-statement-in-running-sql"><a href="#two-limit-statement-in-running-sql" aria-hidden="true" class="header-anchor">#</a> Two <code>limit</code> statement in running SQL</h2> <p>CAUSE: 2 PaginationInterceptor configured. Check your configuration and keep one only</p> <h2 id="return-primary-key-after-insert"><a href="#return-primary-key-after-insert" aria-hidden="true" class="header-anchor">#</a> Return Primary Key after Insert</h2> <p>Primary Key will be set to Entity.id property, just use getId() to get it</p> <h2 id="specify-select-columns-in-mp"><a href="#specify-select-columns-in-mp" aria-hidden="true" class="header-anchor">#</a> Specify select columns in MP</h2> <ul><li>Use EntityWrapper.sqlSelect (v_2.x)</li> <li>Use Wrapper.select() (v_3.x)</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//For version 2.x</span>
EntityWrapper<span class="token generics function"><span class="token punctuation">&lt;</span>H2User<span class="token punctuation">&gt;</span></span> ew <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EntityWrapper</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ew<span class="token punctuation">.</span><span class="token function">setSqlSelect</span><span class="token punctuation">(</span><span class="token string">&quot;test_id as id, name, age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//only select 3 columns</span>
List<span class="token generics function"><span class="token punctuation">&lt;</span>H2User<span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>ew<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span>H2User u<span class="token operator">:</span>list<span class="token punctuation">)</span><span class="token punctuation">{</span>
    Assert<span class="token punctuation">.</span><span class="token function">assertNotNull</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Assert<span class="token punctuation">.</span><span class="token function">assertNotNull</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Assert<span class="token punctuation">.</span><span class="token function">assertNull</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// this column not selected</span>
<span class="token punctuation">}</span>

<span class="token comment">//3.x</span>
mapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>
    Wrappers<span class="token punctuation">.</span><span class="token generics function"><span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span></span><span class="token function">lambdaQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>User<span class="token operator">:</span><span class="token operator">:</span>getId<span class="token punctuation">,</span> User<span class="token operator">:</span><span class="token operator">:</span>getName<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//or use QueryWrapper</span>
mapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics function"><span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="second-level-cache-on-mapper"><a href="#second-level-cache-on-mapper" aria-hidden="true" class="header-anchor">#</a> Second Level Cache on Mapper</h2> <p>We suggest to put cache on service level. You can customize your own BaseServiceImpl</p> <p>If you still want to put cache on mapper level, please use CachePaginationInterceptor to replace PaginationInterceptor</p> <h2 id="refresh-second-level-cache-on-mapper"><a href="#refresh-second-level-cache-on-mapper" aria-hidden="true" class="header-anchor">#</a> Refresh Second Level Cache on Mapper</h2> <p>You can use one of the ways below:</p> <ul><li>Add Cache Annotation on Mapper, specify implementation, eviction</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@CacheNamespace</span><span class="token punctuation">(</span>implementation<span class="token operator">=</span>MybatisRedisCache<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>eviction<span class="token operator">=</span>MybatisRedisCache<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DataResourceMapper</span> <span class="token keyword">extends</span> <span class="token class-name">BaseMapper</span><span class="token generics function"><span class="token punctuation">&lt;</span>DataResource<span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><ul><li>Add cache-ref in mapper.xml</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache-ref</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.your.company.mapper.UserMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cache-ref</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="cause-org-apache-ibatis-type-typeexception-error-setting-null-for-parameter-1-with-jdbctype-other"><a href="#cause-org-apache-ibatis-type-typeexception-error-setting-null-for-parameter-1-with-jdbctype-other" aria-hidden="true" class="header-anchor">#</a> <code>Cause: org.apache.ibatis.type.TypeException:Error setting null for parameter #1 with JdbcType OTHER</code></h2> <blockquote><p>Add configuration: jdbcTypeForNull=NULL</p></blockquote> <blockquote><p>Spring Configuration Bean:</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code>MybatisConfiguration configuration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MybatisConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
configuration<span class="token punctuation">.</span><span class="token function">setDefaultScriptingLanguage</span><span class="token punctuation">(</span>MybatisXMLLanguageDriver<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
configuration<span class="token punctuation">.</span><span class="token function">setJdbcTypeForNull</span><span class="token punctuation">(</span>JdbcType<span class="token punctuation">.</span>NULL<span class="token punctuation">)</span><span class="token punctuation">;</span>
configuration<span class="token punctuation">.</span><span class="token function">setMapUnderscoreToCamelCase</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//open Underscore to Camel case</span>
sqlSessionFactory<span class="token punctuation">.</span><span class="token function">setConfiguration</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>Yml Configuration</p></blockquote> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">mybatis-plus</span><span class="token punctuation">:</span>
  <span class="token key atrule">configuration</span><span class="token punctuation">:</span>
    <span class="token key atrule">jdbc-type-for-null</span><span class="token punctuation">:</span> <span class="token string">'null'</span> 
</code></pre></div><h2 id="cannot-get-params-from-page-object-in-customized-sql-2-x-only"><a href="#cannot-get-params-from-page-object-in-customized-sql-2-x-only" aria-hidden="true" class="header-anchor">#</a> Cannot get params from Page object in customized SQL(2.x Only)</h2> <blockquote><p>MP v_2.x Only: Page extends RowBounds, which is built-in object for Mybatis, cannot get in XML
You can use a Map/POJO as param, or use @Param(&quot;pages&quot;) int pages</p></blockquote> <h2 id="auto-underscore-to-camel-case-for-return-type-map"><a href="#auto-underscore-to-camel-case-for-return-type-map" aria-hidden="true" class="header-anchor">#</a> Auto Underscore To Camel Case for return type Map</h2> <p>Only for:<code>resultType=&quot;java.util.Map&quot;</code></p> <ul><li>Spring Boot</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> ConfigurationCustomizer <span class="token function">configurationCustomizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> i <span class="token operator">-</span><span class="token operator">&gt;</span> i<span class="token punctuation">.</span><span class="token function">setObjectWrapperFactory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MybatisMapWrapperFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="use-limit-in-wrapper"><a href="#use-limit-in-wrapper" aria-hidden="true" class="header-anchor">#</a> Use <code>limit</code> in wrapper</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// only get one record, for Mysql only</span>
wrapper<span class="token punctuation">.</span><span class="token function">last</span><span class="token punctuation">(</span><span class="token string">&quot;limit 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="why-only-service-has-insertbatch"><a href="#why-only-service-has-insertbatch" aria-hidden="true" class="header-anchor">#</a> Why only Service has insertBatch()</h2> <ul><li>SQL has limitation of length, batch sql may exceed; may cause leakage of jdbc connection</li> <li>SQL Batch Grammar different for Databases, cannot make it as a generic solution</li> <li>Current solution for batch: Loop the records for insert, and commit in batch(maybe have a little performance problem)</li></ul> <h2 id="autofill-not-work-for-logic-deletion"><a href="#autofill-not-work-for-logic-deletion" aria-hidden="true" class="header-anchor">#</a> Autofill not work for Logic Deletion</h2> <ul><li><p>Autofill is to put the values to <code>entity</code> when do insert/update, but logic deletion method is deleteById(), which the param is the Primary Key, so autofill won't work</p></li> <li><p>If you want to enable autofill for logic Deletion:</p> <ul><li>Way 1: use update():<code>UpdateWrapper.set(&quot;logicDeleteColumn&quot;,&quot;deleteValue&quot;)</code></li> <li><code>Way 2</code>: refer to <a href="/sites/guide/sql-injector.html">Sql Injector</a>,
use <code>com.baomidou.mybatisplus.extension.injector.methods.LogicDeleteByIdWithFill</code> for SQL injection.<br>
NOTE: Only work for the fields with @TableField(fill=FieldFill.INSERT/UPDATE/INSERT_UPDATE)</li></ul></li> <li><p>Java Config Bean for <code>Way 2</code>:</p> <ol><li>Customize SqlInjector</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> LogicSqlInjector <span class="token function">logicSqlInjector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LogicSqlInjector</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/**
         * Inject your own basic methods
         */</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> List<span class="token generics function"><span class="token punctuation">&lt;</span>AbstractMethod<span class="token punctuation">&gt;</span></span> <span class="token function">getMethodList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            List<span class="token generics function"><span class="token punctuation">&lt;</span>AbstractMethod<span class="token punctuation">&gt;</span></span> methodList <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getMethodList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            methodList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LogicDeleteByIdWithFill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> methodList<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>Customize your basic mapper</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MyBaseMapper</span><span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">BaseMapper</span><span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * Generic methods
     */</span>
    <span class="token keyword">int</span> <span class="token function">deleteByIdWithFill</span><span class="token punctuation">(</span>T entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="deal-the-key-word-of-database-in-3-x"><a href="#deal-the-key-word-of-database-in-3-x" aria-hidden="true" class="header-anchor">#</a> Deal the KEY WORD of database in 3.x</h2> <p>For 2.x, KEY WORD of database will be recognized and dealt automatically. But this feature is removed from 3.x</p> <ul><li>Mp supports multiple databases, and those databases have different solution for KEY WORD, it's hard for maintenance</li> <li>We don't recommend to use KEY WORD for column name</li> <li>So let user to deal the KEY WORD, for example:</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;`status`&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> String status<span class="token punctuation">;</span>
</code></pre></div><h2 id="mybatisplusexception-your-property-named-xxx-cannot-find-the-corresponding-database-column-name"><a href="#mybatisplusexception-your-property-named-xxx-cannot-find-the-corresponding-database-column-name" aria-hidden="true" class="header-anchor">#</a> MybatisPlusException: Your property named &quot;xxx&quot; cannot find the corresponding database column name!</h2> <ul><li>Effected version: v_3.1.1+</li> <li>Appearance: Code works fine for Unit Test, but failed for debugging on application server</li> <li>CAUSE: dev-tools, MP use Class Object(User.class) as the Cache Key instead of ClassName for table info cache since v_3.1.1, dev-tools will use different ClassLoader to load the classes, which will cause such problem</li> <li>Solution: remove dev-tools from pom file</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2020-4-2 13:37:57</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/sites/assets/js/2.1328de9b.js" defer></script><script src="/sites/assets/js/28.f9a7efaf.js" defer></script><script src="/sites/assets/js/app.481a8143.js" defer></script>
  </body>
</html>
